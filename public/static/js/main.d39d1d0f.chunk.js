(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},151:function(e,t,n){},222:function(e,t,n){},248:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(66),s=n.n(c),r=(n(222),n(21)),o=n(47),l=n(187),d=i.a.createContext(),u=n(1),h=function(e){return function(t){return Object(u.jsx)(d.Consumer,{children:function(n){return Object(u.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{context:n}))}})}},p=h((function(e){var t=e.component,n=e.context,a=e.protectionLevel,i=Object(l.a)(e,["component","context","protectionLevel"]);return n.isLoading?null:n.isLoggedIn?"volunteer"===a||n.user.isAdmin?Object(u.jsx)(r.b,Object(o.a)(Object(o.a)({},i),{},{render:function(e){return Object(u.jsx)(t,Object(o.a)({},e))}})):Object(u.jsx)(r.a,{to:"/new-visit"}):Object(u.jsx)(r.a,{to:"/"})})),j=n(8),b=n(9),m=n(10),f=n(11),v=n.p+"static/media/trash-icon.adbd3cc3.svg",O=n.p+"static/media/edit-icon.0d2adfe8.svg",g=n(191),x=n.n(g).a.create({baseURL:"https://centre-lgbtqiplus-idf.herokuapp.com",withCredentials:!0});function y(e){if(e.response.data)throw e;throw e}var C={service:x,signin:function(e){return x.post("/api/auth/signin",e).then((function(e){return e.data})).catch(y)},isLoggedIn:function(){return x.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(y)},logout:function(){return x.get("/api/auth/logout").then((function(e){return e.data})).catch(y)},getUsers:function(){return x.get("/api/user").then((function(e){return e.data})).catch(y)},getOneUser:function(e){return x.get("/api/user".concat(e)).then((function(e){return e.data})).catch(y)},createUser:function(e){return x.post("/api/user/create",e).then((function(e){return e.data})).catch(y)},deleteUser:function(e){return x.delete("/api/user/delete/".concat(e)).then((function(e){return e.data})).catch(y)},updateUser:function(e,t){return x.patch("/api/user/edit/".concat(e),t).then((function(e){return e.data})).catch(y)},getVisits:function(){return x.get("/api/visits").then((function(e){return e.data})).catch(y)},createVisit:function(e){return x.post("/api/visits",e).then((function(e){return e.data})).catch(y)},updateVisit:function(e,t){return x.patch("/api/visits/".concat(e),t).then((function(e){return e.data})).catch(y)},deleteVisit:function(e){return x.delete("/api/visits/".concat(e)).then((function(e){return e.data})).catch(y)},getCategories:function(){return x.get("/api/categories").then((function(e){return e.data})).catch(y)},createCategory:function(e){return x.post("/api/categories",e).then((function(e){return e.data})).catch(y)},updateCategory:function(e,t){return x.patch("/api/categories/".concat(e),t).then((function(e){return e.data})).catch(y)},getContactTypes:function(){return x.get("/api/contactTypes").then((function(e){return e.data})).catch(y)},createContactType:function(e){return x.post("/api/contactTypes",e).then((function(e){return e.data})).catch(y)},updateContactType:function(e,t){return x.patch("/api/contactTypes/".concat(e),t).then((function(e){return e.data})).catch(y)},repartitionByCategory:function(e){return x.get("/api/insight/get-category-repartition?dateBegin=".concat(e.dates[0],"&dateEnd=").concat(e.dates[1])).then((function(e){return e.data})).catch(y)},hotTime:function(e){return x.get("/api/insight/get-popular-hours?dateBegin=".concat(e.dates[0],"&dateEnd=").concat(e.dates[1]).concat(e.weekDays?"&weekDays="+e.weekDays.join(","):"")).then((function(e){return e.data})).catch(y)},repartitionByWeeks:function(e){return x.get("/api/insight/get-popular-days?dateBegin=".concat(e.dates[0],"&dateEnd=").concat(e.dates[1])).then((function(e){return e.data})).catch(y)},getVisitsDateRange:function(e){return x.get("/api/visits?dateBegin=".concat(e.dates[0],"&dateEnd=").concat(e.dates[1])).then((function(e){return e.data})).catch(y)}},S=(n(248),h(function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isHovering:!1},e.handleDelete=function(t){C.deleteUser(t).then((function(t){e.props.getAllUsers()})).catch((function(e){return console.log(e)}))},e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.context,i=t.handlePopup,c=n.login[0].toUpperCase()+n.login.substring(1);return Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainerAdminsVolunteer",children:[n.isAdmin&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"card-info-admins-volunteer",children:[Object(u.jsx)("div",{children:"Admin"}),Object(u.jsx)("p",{children:c})]}),this.state.isHovering&&Object(u.jsxs)("aside",{children:[!a.isLoading&&a.user._id===n._id&&Object(u.jsx)("img",{onClick:i,src:O,alt:"edit-icon"}),!a.isLoading&&a.user._id!==n._id&&Object(u.jsx)("img",{onClick:function(){return e.handleDelete(n._id)},src:v,alt:"trash-icon"})]})]}),!n.isAdmin&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"card-info-admins-volunteer",children:[Object(u.jsx)("div",{children:"B\xe9n\xe9vole"}),Object(u.jsx)("p",{children:c})]}),this.state.isHovering&&Object(u.jsx)("aside",{onClick:i,children:Object(u.jsx)("img",{src:O,alt:"edit-icon"})})]})]})}}]),n}(a.Component))),k=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)(u.Fragment,{children:this.props.users&&this.props.users.map((function(t){return t.isAdmin&&Object(u.jsx)(S,{users:t,handlePopup:function(){return e.props.handlePopup(t)},getAllUsers:e.props.getAllUsers},t._id)}))})}}]),n}(a.Component),w=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)(u.Fragment,{children:this.props.users&&this.props.users.map((function(t){return!t.isAdmin&&Object(u.jsx)(S,{users:t,handlePopup:function(){return e.props.handlePopup(t)},getAllUsers:e.props.getAllUsers},t._id)}))})}}]),n}(a.Component),D=n(22),N=n.n(D),L=n(34),F=n(32),A=(n(111),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={login:e.props.value?e.props.value.login:"",password:"",isAdmin:!e.props.value||e.props.value.isAdmin,isLoginLengthValidated:!0,isLoginFree:!0,isPasswordValidated:!0,isTestMode:!1},e.wrapperRef=i.a.createRef(),e.handleClickOutside=function(t){e.wrapperRef&&!e.wrapperRef.current.contains(t.target)&&e.props.handlePopup()},e.handleChange=function(t){var n,a=t.target.name;e.setState((n={},Object(F.a)(n,a,t.target.value),Object(F.a)(n,"isLoginLengthValidated",!0),Object(F.a)(n,"isPasswordValidated",!0),n))},e.handleSubmit=function(){var t=Object(L.a)(N.a.mark((function t(n){var a,i,c,s,r,o,l,d,u;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state,i=a.login,c=a.password,s=a.isAdmin,r=e.props.users,"modifier"!==e.props.action||"true"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://centre-lgbtqiplus-idf.herokuapp.com"}).REACT_APP_TEST){t.next=6;break}return e.setState({isTestMode:!0}),t.abrupt("return");case 6:if(t.prev=6,o={login:i,isAdmin:s},l=!0,d=!0,u=!0,r.find((function(t){var n;return t.login===i&&t.login!==(null===(n=e.props.value)||void 0===n?void 0:n.login)}))&&(d=!1),i.length<3&&(l=!1),c.length<3&&(0===c.length&&e.props.value||(u=!1)),l&&d&&u){t.next=15;break}return e.setState({isLoginLengthValidated:l,isLoginFree:d,isPasswordValidated:u}),t.abrupt("return");case 15:return""!==c&&(o.password=c),t.next=18,e.props.formAction(o);case 18:e.props.getAllUsers(),e.props.handlePopup(),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(6),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[6,22]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.state,t=e.isLoginLengthValidated,n=e.isLoginFree,a=e.isPasswordValidated,i=e.isTestMode;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{ref:this.wrapperRef,className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[this.props.action," un\xb7e utilisateur\xb7ice"]}),Object(u.jsx)("div",{className:"close-pop-up",onClick:this.props.handlePopup,children:"Annuler"})]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"form-update-create",children:[Object(u.jsx)("label",{htmlFor:"login",children:"nom utilisateur\xb7ice"}),Object(u.jsx)("input",{className:t&&n&&!i?"":"error-input",onChange:this.handleChange,value:this.state.login,type:"text",name:"login",id:"login"}),!t&&Object(u.jsx)("div",{className:"error-message user-name-error",children:Object(u.jsx)("p",{children:"Le login doit contenir au moins 3 caract\xe8res."})}),!n&&Object(u.jsx)("div",{className:"error-message user-name-error",children:Object(u.jsx)("p",{children:"Ce nom d\u2019utilisateur est d\xe9j\xe0 pris."})}),Object(u.jsx)("label",{htmlFor:"password",children:"mot de passe"}),Object(u.jsx)("input",{className:a&&n&&!i?"":"error-input",onChange:this.handleChange,value:this.props.password,type:"password",name:"password",id:"password",placeholder:"ajouter"===this.props.action?"":"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf"}),!a&&Object(u.jsx)("div",{className:"error-message name-error-contact",children:Object(u.jsx)("p",{children:"Le mot de passe doit contenir au moins 3 caract\xe8res."})}),i&&Object(u.jsx)("div",{className:"error-message name-error-contact",children:Object(u.jsx)("p",{children:"Action impossible sur la version test"})}),Object(u.jsx)("button",{children:this.props.action[0].toUpperCase()+this.props.action.substr(1)})]})]})})}}]),n}(a.Component)),U=(n(250),n.p+"static/media/plus-icon.cc463e15.svg"),T=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={users:null,isShownCreate:!1,isShownUpdate:null},e.getAllUsers=function(){C.getUsers().then((function(t){return e.setState({users:t})})).catch((function(e){return console.log(e)}))},e.handlePopupCreate=function(){e.setState({isShownCreate:!e.state.isShownCreate,isShownUpdate:null})},e.handlePopupUpdate=function(t){e.setState({isShownUpdate:t,isShownCreate:!1})},e.handleHidePopup=function(){e.setState({isShownUpdate:null,isShownCreate:!1})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.getUsers().then((function(t){return e.setState({users:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.isShownCreate,a=e.isShownUpdate;return Object(u.jsxs)("div",{id:"settings-users",children:[Object(u.jsxs)("div",{id:"header-users",children:[Object(u.jsx)("h1",{children:"utilisateur\xb7ices"}),Object(u.jsxs)("button",{onClick:this.handlePopupCreate,children:[Object(u.jsx)("img",{src:U,alt:"plus-icon"}),Object(u.jsx)("p",{children:"Ajouter un\xb7e utilisateur\xb7ice"})]})]}),Object(u.jsx)("div",{className:"users-container",children:Object(u.jsx)(k,{users:t,handlePopup:this.handlePopupUpdate,getAllUsers:this.getAllUsers})}),Object(u.jsx)("div",{className:"users-container",children:Object(u.jsx)(w,{users:t,handlePopup:this.handlePopupUpdate,getAllUsers:this.getAllUsers})}),n&&Object(u.jsx)(A,{formAction:C.createUser,handlePopup:this.handleHidePopup,getAllUsers:this.getAllUsers,users:t,action:"ajouter"}),a&&Object(u.jsx)(A,{formAction:function(e){return C.updateUser(a._id,e)},handlePopup:this.handleHidePopup,getAllUsers:this.getAllUsers,value:a,users:t,action:"modifier"})]})}}]),n}(a.Component),M=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsx)(u.Fragment,{children:"/"!==this.props.location.pathname&&Object(u.jsx)("div",{id:"header-flag",children:["red","orange","yellow","green","blue","purple"].map((function(e){return Object(u.jsx)("div",{id:e},e)}))})})}}]),n}(a.Component),I=Object(r.g)(M),V=(n(151),n.p+"static/media/logo.362bd950.svg"),R=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={username:"",password:""},e.handleSubmit=function(){var t=Object(L.a)(N.a.mark((function t(n){var a,i,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.state,i=a.username,c=a.password,t.prev=2,t.next=5,e.props.onLoggedIn({login:i,password:c});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isValidSignin,a=t.updateValidSignin;return Object(u.jsxs)("div",{className:"form-container",children:[Object(u.jsx)("img",{src:V,alt:""}),Object(u.jsxs)("form",{className:"form-signin",onSubmit:this.handleSubmit,children:[Object(u.jsx)("label",{htmlFor:"username",children:"Nom d'utilisateur.ice"}),Object(u.jsx)("input",{className:n?"":"error-input",onChange:function(t){e.setState({username:t.target.value}),a()},value:this.state.username,type:"text",id:"username",name:"username"}),Object(u.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(u.jsx)("input",{className:n?"":"error-input",onChange:function(t){e.setState({password:t.target.value}),a()},value:this.state.password,type:"password",id:"password",name:"password "}),!n&&Object(u.jsx)("div",{className:"error-message",children:Object(u.jsx)("p",{children:"Mauvais mot de passe et/ou nom d'utilisateur.ice"})}),Object(u.jsx)("button",{children:"Connexion"})]})]})}}]),n}(a.Component),P=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={signInStyle:null,flagStyle:null,helloStyle:null,isValidSignin:!0},e.handleLoggedin=function(t){C.signin(t).then((function(t){e.props.context.setUser(t),e.setState({signInStyle:{display:"block",transform:"translateY(-100%)",animation:"outro-sweep 1s ease-out"},helloStyle:{display:"none"}}),setTimeout((function(){e.setState({flagStyle:{display:"block",transform:"translateY(calc(-100% + 6px))",animation:"outro-sweep 0.5s ease-out"}})}),700),setTimeout((function(){return e.props.history.push("/history")}),1500)})).catch((function(t){e.setState({isValidSignin:!1}),console.log(t)}))},e.updateValidSignin=function(){e.setState({isValidSignin:!0})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;!this.props.context.isLoggedIn&!this.props.context.isLoading&&(setTimeout((function(){e.setState({helloStyle:{display:"block"}})}),700),setTimeout((function(){e.setState({signInStyle:{display:"block",animation:"signinsweep 0.9s ease-out"}})}),900))}},{key:"componentDidUpdate",value:function(e){var t=this;e.context.isLoading!==this.props.context.isLoading&&(this.props.context.isLoggedIn?this.props.history.push("/new-visit"):(setTimeout((function(){t.setState({helloStyle:{display:"block"}})}),700),setTimeout((function(){t.setState({signInStyle:{display:"block",animation:"signinsweep 0.9s ease-out"}})}),900)))}},{key:"render",value:function(){var e=this,t=this.state.isValidSignin;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{id:"signin",style:this.state.signInStyle,children:Object(u.jsx)(R,{onLoggedIn:this.handleLoggedin,isValidSignin:t,updateValidSignin:this.updateValidSignin})}),Object(u.jsxs)("div",{id:"flag-container",children:[Object(u.jsx)("p",{style:this.state.helloStyle,children:"bonjour"}),["red","orange","yellow","green","blue","purple"].map((function(t){return Object(u.jsx)("div",{id:t,style:e.state.flagStyle},t)}))]})]})}}]),n}(i.a.Component),E=Object(r.g)(h(P)),H=n(24),_=(n(251),n.p+"static/media/exit-icon.ee9ecdda.svg"),B=n.p+"static/media/drop-down-downarrow.55d8cc96.svg",z=n.p+"static/media/drop-down-uparrow.3d642aba.svg",G=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={rapportClicked:!1},e.handleOpen=function(){e.setState({rapportClicked:!e.state.rapportClicked})},e.handleClose=function(){e.setState({rapportClicked:!1})},e.handleLogout=function(){var t=e.props.context;C.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.context,t=this.state.rapportClicked;return Object(u.jsx)(u.Fragment,{children:"/"!==this.props.location.pathname&&Object(u.jsxs)("div",{id:"DashboardNavBar",children:[Object(u.jsx)("img",{className:"logo",src:V,alt:""}),Object(u.jsx)(H.c,{exact:!0,to:"/history",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Visites"}),Object(u.jsxs)("div",{className:"rapport-container",children:[Object(u.jsxs)("div",{className:"rapport",onClick:this.handleOpen,children:[Object(u.jsx)("p",{children:"Rapport"}),Object(u.jsx)("img",{src:t?z:B,alt:""})]}),t&&Object(u.jsxs)("div",{onMouseLeave:this.handleClose,className:"drop-down-rapport",children:[Object(u.jsx)(H.c,{exact:!0,to:"/categories-repartition",className:"sublink",activeClassName:"selected",children:"R\xe9partition des visites"}),Object(u.jsx)(H.c,{exact:!0,to:"/jour-affluence",className:"sublink",activeClassName:"selected",children:"Jours d'affluence"}),Object(u.jsx)(H.c,{exact:!0,to:"/heure-affluence",className:"sublink",activeClassName:"selected",children:"Heures d'affluence"}),Object(u.jsx)(H.c,{exact:!0,to:"/exporter",className:"sublink",activeClassName:"selected",children:"Exporter"})]})]}),!e.isLoading&&e.isLoggedIn&&e.user.isAdmin&&Object(u.jsx)(H.c,{exact:!0,to:"/parameters",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Param\xe8tres"}),!e.isLoading&&e.isLoggedIn&&e.user.isAdmin&&Object(u.jsx)(H.c,{exact:!0,to:"/users",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Utilisateur\xb7ices"}),Object(u.jsxs)("div",{className:"logout",onClick:this.handleLogout,children:[Object(u.jsx)("img",{src:_,alt:""}),Object(u.jsx)("p",{children:"D\xe9connexion"})]})]})})}}]),n}(a.Component),J=h(Object(r.g)(G)),K=(n(252),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isHovering:!1},e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.isHovering,t=this.props,n=t.visit,a=t.onDelete,i=new Date(n.date),c=i.getHours(),s=i.getMinutes();return s=s<10?"0"+s:s,Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainer",children:[Object(u.jsxs)("div",{className:"card-info",children:[Object(u.jsx)("p",{children:"".concat(c,"h").concat(s)}),Object(u.jsx)("div",{children:n.category.name}),Object(u.jsx)("div",{children:n.contactType.name})]}),e&&Object(u.jsxs)("aside",{children:[Object(u.jsx)(H.b,{to:{pathname:"/update-visit",state:{visitId:n}},children:Object(u.jsx)("img",{src:O,alt:""})}),Object(u.jsx)("img",{onClick:function(){return a(n._id)},src:v,alt:"trash-can"})]})]})}}]),n}(a.Component)),W=(n(253),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={allVisits:null},e.onDelete=function(t){C.deleteVisit(t).then((function(t){var n=e.state.allVisits.filter((function(e){return e._id!==t._id}));e.setState({allVisits:n})}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.getVisits().then((function(t){e.setState({allVisits:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.allVisits;return Object(u.jsxs)("div",{id:"History",children:[Object(u.jsxs)("div",{id:"header",children:[Object(u.jsx)("p",{children:"derni\xe8res visites"}),Object(u.jsx)(H.b,{exact:"true",to:"/new-visit",className:"link",children:Object(u.jsxs)("button",{children:[Object(u.jsx)("img",{src:U,alt:""}),Object(u.jsx)("p",{children:"Ajouter une visite "})]})})]}),t&&t.map((function(t){return Object(u.jsx)(K,{visit:t,onDelete:e.onDelete},t._id)}))]})}}]),n}(a.Component)),Y=n.p+"static/media/info-icon.d796eed5.svg",q=n(133),Q=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isHoveringInfoIcon:!1},e.handleMouseEnter=function(){e.setState({isHoveringInfoIcon:!0})},e.handleMouseLeave=function(){e.setState({isHoveringInfoIcon:!1})},e.handleTouchInfo=function(t){t.preventDefault(),e.setState({isHoveringInfoIcon:!e.state.isHoveringInfoIcon})},e.handleTouchEnd=function(e){e.preventDefault()},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.category,n=e.handleSelectItem,a=this.state.isHoveringInfoIcon;return Object(u.jsxs)("div",{className:"cat-cont-card",children:[Object(u.jsxs)("div",{onClick:function(){return n(t._id,t.name,"category")},className:"cat-cont",children:[a&&!q.isMobileOnly&&Object(u.jsxs)("div",{className:"info-toolbox",children:[Object(u.jsx)("h3",{children:t.description}),Object(u.jsx)("div",{})]}),Object(u.jsx)("p",{children:t.name}),Object(u.jsx)("img",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:{opacity:a?"1":"0.5"},onTouchStart:this.handleTouchInfo,onTouchEnd:this.handleTouchEnd,src:Y,alt:""})]}),q.isMobileOnly&&a&&Object(u.jsx)("div",{className:"description-mobile",children:Object(u.jsx)("p",{children:t.description})})]})}}]),n}(a.Component),X=(n(255),n.p+"static/media/purple-plus-icon.e544e5d6.svg"),Z=n.p+"static/media/minus-icon.6e71681a.svg",$=n.p+"static/media/wait-icon.bf1db0d1.svg",ee=n.p+"static/media/check-icon.36bd77f3.svg",te=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={nbOfPerson:1,date:new Date,category:null,contactType:null,allCategories:null,allContactTypes:null,visitToUpdate:null,isUpdateVisit:!1},e.handleDecrease=function(){e.state.nbOfPerson>1&&e.setState({nbOfPerson:e.state.nbOfPerson-1})},e.handleIncrease=function(){e.setState({nbOfPerson:e.state.nbOfPerson+1})},e.handleSelectItem=function(t,n,a){e.setState(Object(F.a)({},a,{id:t,name:n}))},e.handleChangeItem=function(t){var n;e.setState((n={},Object(F.a)(n,t,null),Object(F.a)(n,"isUpdateVisit",!1),n))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.nbOfPerson,i=n.category,c=n.contactType,s=n.visitToUpdate;if(s)C.updateVisit(s._id,{date:s.date,category:i.id,contactType:c.id}).then((function(){return e.props.history.push("/history")})).catch((function(e){return console.log(e)}));else for(var r=function(t){C.createVisit({category:i.id,contactType:c.id}).then((function(){t===a-1&&e.props.history.push("/history")})).catch((function(e){return console.log(e)}))},o=0;o<a;o++)r(o)},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.getCategories().then((function(t){var n=t.filter((function(e){return e.isActive}));e.setState({allCategories:n})})).catch((function(e){return console.log(e)})),C.getContactTypes().then((function(t){var n=t.filter((function(e){return e.isActive}));e.setState({allContactTypes:n})})).catch((function(e){return console.log(e)})),this.props.visitId&&this.setState({visitToUpdate:this.props.visitId,isUpdateVisit:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.allCategories,a=t.category,i=t.allContactTypes,c=t.contactType,s=t.date,r=t.nbOfPerson,o=t.visitToUpdate,l=t.isUpdateVisit,d=s.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return Object(u.jsxs)("form",{onSubmit:this.handleSubmit,id:"CreateForm",children:[!o&&Object(u.jsxs)("div",{id:"first-form",children:[Object(u.jsxs)("div",{id:"nb-of-person",children:[Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"nombre de personnes"}),r&&Object(u.jsx)("img",{src:ee,alt:""})]}),Object(u.jsxs)("div",{className:"input-content",children:[Object(u.jsx)("img",{onClick:this.handleDecrease,src:Z,alt:""}),Object(u.jsxs)("p",{className:"validated-input",children:[r," personne",r>1?"s":""]}),Object(u.jsx)("img",{onClick:this.handleIncrease,src:X,alt:""})]})]}),Object(u.jsxs)("div",{id:"date",children:[Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"date"}),s&&Object(u.jsx)("img",{src:ee,alt:""})]}),Object(u.jsx)("div",{className:"input-content",children:Object(u.jsx)("p",{className:"validated-input",children:d})})]})]}),Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"service du centre demand\xe9"}),a&&Object(u.jsx)("img",{src:ee,alt:""})]}),Object(u.jsx)("div",{className:"cat-cont-container",children:!l&&!a&&n&&n.map((function(t){return Object(u.jsx)(Q,{category:t,handleSelectItem:e.handleSelectItem},t._id)}))}),a&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("category")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:a.name}),Object(u.jsx)("img",{src:O,alt:""})]}),l&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("category")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:o.category.name}),Object(u.jsx)("img",{src:O,alt:""})]}),Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"mode de contact utilis\xe9"}),!a&&Object(u.jsx)("img",{src:$,alt:""}),c&&a&&Object(u.jsx)("img",{src:ee,alt:""})]}),Object(u.jsx)("div",{className:"cat-cont-container",children:a&&!c&&i&&i.map((function(t){return Object(u.jsx)("div",{className:"cat-cont-card",children:Object(u.jsx)("div",{onClick:function(){return e.handleSelectItem(t._id,t.name,"contactType")},className:"cat-cont",children:Object(u.jsx)("p",{children:t.name})},t._id)})}))}),a&&c&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("contactType")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:c.name}),Object(u.jsx)("img",{src:O,alt:""})]}),l&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("contactType")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:o.contactType.name}),Object(u.jsx)("img",{src:O,alt:""})]}),a&&c&&Object(u.jsx)("button",{children:"Enregistrer"})]})}}]),n}(a.Component),ne=Object(r.g)(te),ae=(n(256),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleCancel=function(){e.props.history.push("/history")},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"FormHeader",children:[Object(u.jsx)("h1",{children:this.props.title}),Object(u.jsxs)("button",{onClick:this.handleCancel,children:[" ",Object(u.jsx)("p",{children:" Annuler "})," "]})]})}}]),n}(a.Component)),ie=Object(r.g)(ae),ce=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ie,{title:"ajouter une nouvelle visite"}),Object(u.jsx)(ne,{})]})}}]),n}(a.Component),se=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ie,{title:"modifier une visite"}),this.props.location.state.visitId&&Object(u.jsx)(ne,{visitId:this.props.location.state.visitId})]})}}]),n}(a.Component),re=n.p+"static/media/archive-icon.3b723ef2.svg",oe=n.p+"static/media/on-off-icon.3d90d127.svg",le=(n(257),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isHovering:!1},e.onOffItem=Object(L.a)(N.a.mark((function t(){var n,a,i,c,s,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.item,a=n._id,i=n.isActive,c=n.name,s=n.description,r=e.props.handleUpdateView,console.log(a),t.prev=3,t.next=6,e.props.updateItem(a,{name:c,description:s,isActive:!i});case 6:r(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),r();case 13:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.handleOpenUpdate;return Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainerItem",children:[Object(u.jsxs)("div",{className:"left-container",children:[Object(u.jsx)("div",{className:"status-container",children:Object(u.jsx)("p",{children:t.isActive?"actif":"archiv\xe9"})}),Object(u.jsx)("p",{children:t.name})]}),this.state.isHovering&&t.isActive&&Object(u.jsxs)("aside",{children:[Object(u.jsx)("img",{src:O,alt:"edit-icone",onClick:n}),Object(u.jsx)("img",{src:re,alt:"archive-icon",onClick:this.onOffItem})]}),this.state.isHovering&&!t.isActive&&Object(u.jsx)("aside",{children:Object(u.jsx)("img",{src:oe,alt:"archive-icon",onClick:this.onOffItem})})]})}}]),n}(a.Component)),de=(n(258),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={items:null,showCreateForm:!1,showUpdateForm:null},e.handleUpdateView=Object(L.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.getAllItmes();case 3:n=t.sent,e.setState({items:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleOpenCreate=function(){e.setState({showUpdateForm:null,showCreateForm:!0})},e.handleOpenUpdate=function(t){e.setState({showCreateForm:!1,showUpdateForm:t})},e.handleCloseCreate=function(){e.setState({showCreateForm:!1})},e.handleCloseUpdate=function(){e.setState({showUpdateForm:null})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(L.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.getAllItmes();case 3:t=e.sent,this.setState({items:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,a=this.props,i=a.title,c=a.buttonName,s=a.updateItem,r=a.FormCreateUpdateComponent,o=a.formCreateAction,l=this.state,d=l.items,h=l.showCreateForm,p=l.showUpdateForm,j="Type de contact"===i?"un type de contact":"une cat\xe9gorie";return d&&(e=d.filter((function(e){return e.isActive})),t=d.filter((function(e){return!e.isActive}))),Object(u.jsxs)("div",{id:"item-collection-container",children:[Object(u.jsxs)("div",{id:"header-cat-cont",children:[Object(u.jsx)("p",{children:i}),Object(u.jsxs)("div",{onClick:this.handleOpenCreate,children:[Object(u.jsx)("img",{src:U,alt:"plus-icon"}),Object(u.jsx)("p",{children:c})]})]}),d&&Object(u.jsxs)("div",{id:"items-container",children:[Object(u.jsx)("div",{className:"dashboard-cat-cont",children:e.map((function(e){return Object(u.jsx)(le,{item:e,updateItem:s,handleOpenUpdate:function(){return n.handleOpenUpdate(e)},handleUpdateView:n.handleUpdateView},e._id)}))}),Object(u.jsx)("div",{className:"dashboard-cat-cont",children:t.map((function(e){return Object(u.jsx)(le,{item:e,updateItem:s,handleOpenUpdate:function(){return n.handleOpenUpdate(e)},handleUpdateView:n.handleUpdateView},e._id)}))})]}),h&&Object(u.jsx)(r,{formType:"Ajouter ",formName:j,formAction:o,handleUpdateView:this.handleUpdateView,closeForm:this.handleCloseCreate}),p&&Object(u.jsx)(r,{formType:"Modifier ",formName:j,formAction:function(e){return s(n.state.showUpdateForm._id,e)},handleUpdateView:this.handleUpdateView,closeForm:this.handleCloseUpdate,values:this.state.showUpdateForm})]})}}]),n}(a.Component)),ue=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={name:e.props.values?e.props.values.name:"",description:e.props.values?e.props.values.description:"",isNameValidated:!0,isdescriptionValidated:!0},e.wrapperRef=i.a.createRef(),e.handleClickOutside=function(t){e.wrapperRef&&!e.wrapperRef.current.contains(t.target)&&e.props.closeForm()},e.handleSubmit=function(){var t=Object(L.a)(N.a.mark((function t(n){var a,i,c,s,r,l,d;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props,i=a.formAction,c=a.handleUpdateView,s=a.closeForm,r=e.state,l=r.name,d=r.description,!(l.length<3||d.length<3)){t.next=6;break}return e.setState({isNameValidated:l.length>=3,isdescriptionValidated:d.length>=3}),t.abrupt("return");case 6:return t.prev=6,t.next=9,i(Object(o.a)(Object(o.a)({},e.state),{},{isActive:!0}));case 9:c(),s(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0),s();case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n;e.setState((n={},Object(F.a)(n,t.target.name,t.target.value),Object(F.a)(n,"isNameValidated",!0),Object(F.a)(n,"isdescriptionValidated",!0),n))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(e){if(e.values){var t=e.values.name;this.props.values.name!==t&&this.setState({name:this.props.values.name})}}},{key:"render",value:function(){var e=this.props,t=e.formType,n=e.formName,a=e.closeForm,i=this.state,c=i.name,s=i.description,r=i.isNameValidated,o=i.isdescriptionValidated;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{ref:this.wrapperRef,className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[t,n]}),Object(u.jsx)("div",{className:"close-pop-up",onClick:a,children:"Annuler"})]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"form-update-create",children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name"}),Object(u.jsx)("input",{className:r?"":"error-input",type:"text",name:"name",id:"name",value:c,onChange:this.handleChange}),!r&&Object(u.jsx)("div",{className:"error-message name-error",children:Object(u.jsx)("p",{children:"Le nom doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("label",{htmlFor:"description",children:"Description"}),Object(u.jsx)("textarea",{className:o?"":"error-input",name:"description",id:"description",value:s,onChange:this.handleChange}),!o&&Object(u.jsx)("div",{className:"error-message description-error",children:Object(u.jsx)("p",{children:"La description doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("button",{children:t})]})]})})}}]),n}(a.Component),he=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={name:e.props.values?e.props.values.name:"",isNameValidated:!0},e.wrapperRef=i.a.createRef(),e.handleClickOutside=function(t){e.wrapperRef&&!e.wrapperRef.current.contains(t.target)&&e.props.closeForm()},e.handleChange=function(t){e.setState({name:t.target.value,isNameValidated:!0})},e.handleSubmit=function(){var t=Object(L.a)(N.a.mark((function t(n){var a,i,c,s,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props,i=a.formAction,c=a.handleUpdateView,s=a.closeForm,!((r=e.state.name).length<3)){t.next=6;break}return e.setState({isNameValidated:!1}),t.abrupt("return");case 6:return t.prev=6,t.next=9,i({name:r,isActive:!0});case 9:c(),s(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0),s();case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(e){if(e.values){var t=e.values.name;this.props.values.name!==t&&this.setState({name:this.props.values.name})}}},{key:"render",value:function(){var e=this.props,t=e.formType,n=e.formName,a=e.closeForm,i=this.state,c=i.name,s=i.isNameValidated;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{ref:this.wrapperRef,className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[t,n]}),Object(u.jsx)("div",{className:"close-pop-up",onClick:a,children:"Annuler"})]}),Object(u.jsxs)("form",{className:"form-update-create",onSubmit:this.handleSubmit,children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name"}),Object(u.jsx)("input",{className:s?"":"error-input",type:"text",name:"name",id:"name",value:c,onChange:this.handleChange}),!s&&Object(u.jsx)("div",{className:"error-message name-error-contact",children:Object(u.jsx)("p",{children:"Le nom doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("button",{children:t})]})]})})}}]),n}(a.Component);var pe=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(de,{title:"Cat\xe9gories",buttonName:"Ajouter une cat\xe9gorie",getAllItmes:C.getCategories,FormCreateUpdateComponent:ue,updateItem:C.updateCategory,formCreateAction:C.createCategory}),Object(u.jsx)(de,{title:"Type de contact",buttonName:"Ajouter un type de contact",getAllItmes:C.getContactTypes,FormCreateUpdateComponent:he,updateItem:C.updateContactType,formCreateAction:C.createContactType})]})},je=n(398),be=n(405),me=n(84),fe=n(204),ve=n(100),Oe=n(87),ge=n(67),xe=(n(112),n(113),n(212)),ye=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.calendarClicked,n=e.setStartDate,a=e.openCalendar,i=e.date,c=e.selectDayClicked,s=e.openFilterDay,r=e.weekDays,o=e.leaveSelectDay,l=e.title;return Object(u.jsxs)("div",{className:"Graph-header",children:[Object(u.jsx)("h2",{children:l}),Object(u.jsxs)("div",{className:"filter-container",children:[this.props.isCheckboxes&&Object(u.jsxs)("div",{className:"select-day-container",children:[Object(u.jsx)("p",{className:c?"selected-filter":"",onClick:s,children:"Choisir jours"}),c&&Object(u.jsxs)("div",{onMouseLeave:o,className:"select-day-drop-down",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Lundi",children:"Lundi"}),Object(u.jsx)("input",{type:"checkbox",name:"Lundi",id:"Lundi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Lundi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Mardi",children:"Mardi"}),Object(u.jsx)("input",{type:"checkbox",name:"Mardi",id:"Mardi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Mardi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Mercredi",children:"Mercredi"}),Object(u.jsx)("input",{type:"checkbox",name:"Mercredi",id:"Mercredi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Mercredi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Jeudi",children:"Jeudi"}),Object(u.jsx)("input",{type:"checkbox",name:"Jeudi",id:"Jeudi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Jeudi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Vendredi",children:"Vendredi"}),Object(u.jsx)("input",{type:"checkbox",name:"Vendredi",id:"Vendredi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Vendredi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Samedi",children:"Samedi"}),Object(u.jsx)("input",{type:"checkbox",name:"Samedi",id:"Samedi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Samedi")})]})]})]}),Object(u.jsx)("p",{className:t?"selected-filter":"",onClick:a,children:"Choisir dates"}),t&&Object(u.jsx)("div",{onMouseLeave:o,children:Object(u.jsx)(xe.a,{onChange:n,selectRange:!0,value:i,className:"small-calendar"})})]})]})}}]),n}(a.Component),Ce=Math.PI/180,Se=function(e){var t=e.cx,n=e.cy,a=e.midAngle,i=e.innerRadius,c=e.outerRadius,s=e.percent,r=(e.name,i+.5*(c-i)),o=t+r*Math.cos(-a*Ce),l=n+r*Math.sin(-a*Ce);return Object(u.jsx)("text",{x:o,y:l,fill:"white",textAnchor:o>t?"start":"end",dominantBaseline:"central",children:"".concat((100*s).toFixed(0),"%")})},ke=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={data:null,date:[new Date,new Date],calendarClicked:!1,plotLegend:!1},e.chartRef=Object(a.createRef)(),e.colors=["#ffb0b0","#fac696","#f7e68f","#a7f2a5","#96f2ef","#b5c8ff","#F5C7FF","#C4C4C4"],e.setStartDate=function(t){e.setState({date:t},(function(){return C.repartitionByCategory({dates:t}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))})),e.setState({calendarClicked:!1})},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked})},e.leaveSelectDay=function(){e.setState({calendarClicked:!1})},e.exportChart=function(){e.setState({plotLegend:!0},(function(){Object(ge.exportComponentAsPNG)(e.chartRef),e.setState({plotLegend:!1})}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date[0].toISOString().substring(0,10)+" 00:00:00",n=this.state.date[1].toISOString().substring(0,10)+" 23:59:59";C.repartitionByCategory({dates:[t,n]}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.data,i=t.calendarClicked,c=t.plotLegend,s=n[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),r=n[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(ye,{setStartDate:this.setStartDate,calendarClicked:i,openCalendar:this.openCalendar,leaveSelectDay:this.leaveSelectDay,date:n,title:"r\xe9partitions des semaines"}),Object(u.jsx)("div",{className:"background-container",ref:this.chartRef,children:Object(u.jsxs)("div",{className:"Graph-container",children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",s," au ",r]})}),a&&Object(u.jsx)(je.a,{width:"100%",height:"100%",children:Object(u.jsxs)(be.a,{children:[Object(u.jsx)(me.a,{verticalAlign:"top",align:"center",height:"30px"}),Object(u.jsx)(fe.a,{data:a,startAngle:180,endAngle:0,dataKey:"value",outerRadius:"100%",isAnimationActive:!1,label:c&&Se,labelLine:!1,height:20,legendType:c?"square":"none",children:a.map((function(t,n){return Object(u.jsx)(ve.a,{fill:e.colors[n%e.colors.length]},"cell-".concat(n))}))}),Object(u.jsx)(Oe.a,{contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px",transform:"translate(-60%, -100%)"}})]})}),Object(u.jsxs)("div",{className:"bottom-container",children:[a&&Object(u.jsxs)("div",{className:"total",children:[Object(u.jsx)("h2",{children:"total des visites"}),Object(u.jsx)("p",{children:a.reduce((function(e,t){return e+t.value}),0)})]}),Object(u.jsx)("div",{className:"download-data",onClick:this.exportChart,style:{display:c?"none":"flex"},children:Object(u.jsx)("p",{children:"Exporter en PNG"})})]})]})})]})}}]),n}(a.Component),we=n(402),De=n(102),Ne=n(103),Le=n(209),Fe=function(e){var t=e.cx,n=e.cy;return Object(u.jsxs)("svg",{x:t-20,y:n-20,width:80,height:80,fill:"red",viewBox:"0 0 1024 1024",children:[Object(u.jsxs)("mask",{id:"a",width:"503",height:"457",x:"17",y:"44",maskUnits:"userSpaceOnUse",children:[Object(u.jsx)("path",{fill:"#FFFFFF",d:"M60.832 87.832c58.443-58.443 153.197-58.443 211.64 0l196.645 196.645c6.248 6.248 6.248 16.379 0 22.627L280.104 496.117c-6.248 6.248-16.379 6.248-22.627 0L60.832 299.472c-58.443-58.443-58.443-153.197 0-211.64z"}),Object(u.jsx)("path",{fill:"#FFFFFF",d:"M475.758 87.832c-58.443-58.443-153.197-58.443-211.64 0L67.474 284.477c-6.249 6.248-6.249 16.379 0 22.627l189.012 189.013c6.249 6.248 16.379 6.248 22.628 0l196.644-196.645c58.443-58.443 58.443-153.197 0-211.64z"})]}),Object(u.jsxs)("g",{mask:"url(#a)",children:[Object(u.jsx)("path",{fill:"#FFB0B0",d:"M17 44h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#FAC696",d:"M17 110.143h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#F7E68F",d:"M17 176.286h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#A7F2A5",d:"M17 242.429h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#96F2EF",d:"M17 308.571h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#B5C8FF",d:"M17 374.714h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#F5C7FF",d:"M17 440.857h503V507H17z"})]})]})},Ae=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.stroke,i=e.value;return Object(u.jsx)("text",{x:t,y:n,dy:-20,fill:a,fontSize:10,textAnchor:"middle",children:i})}}]),n}(a.PureComponent),Ue=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={data:null,date:[new Date(new Date-26784e5),new Date],calendarClicked:!1,plotLegend:!1},e.chartRef=Object(a.createRef)(),e.setStartDate=function(t){e.setState({date:t},(function(){return C.repartitionByWeeks({dates:t}).then((function(t){return e.setState({data:t.agregatedData,date:t.updatedDates.map((function(e){return new Date(e)}))})})).catch((function(e){return console.log(e)}))})),e.setState({calendarClicked:!1})},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked})},e.leaveSelectDay=function(){e.setState({calendarClicked:!1})},e.exportChart=function(){e.setState({plotLegend:!0},(function(){Object(ge.exportComponentAsPNG)(e.chartRef),e.setState({plotLegend:!1})}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date,n=new Date(Date.UTC(t[0].getFullYear(),t[0].getMonth(),t[0].getDate())),a=new Date(Date.UTC(t[1].getFullYear(),t[1].getMonth(),t[1].getDate(),23,59,59));C.repartitionByWeeks({dates:[n,a]}).then((function(t){e.setState({data:t.agregatedData,date:t.updatedDates.map((function(e){return new Date(e)}))})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.date,n=e.data,a=e.calendarClicked,i=e.plotLegend,c=t[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),s=t[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(ye,{setStartDate:this.setStartDate,calendarClicked:a,openCalendar:this.openCalendar,leaveSelectDay:this.leaveSelectDay,date:t,title:"jours d'affluence"}),Object(u.jsxs)("div",{className:"background-hot-day",ref:this.chartRef,children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",c," au ",s]})}),Object(u.jsx)("div",{className:"Graph-hot-day",children:this.state.data&&Object(u.jsx)(je.a,{width:"100%",height:"70%",style:{paddingTop:"50px"},children:Object(u.jsxs)(we.a,{width:"100%",height:"100%",data:this.state.data,margin:{top:5,right:30,left:20,bottom:5},children:[Object(u.jsx)(De.a,{dataKey:"name",tick:{fill:"#706C7A",fontSize:14},tickMargin:15,stroke:"#706C7A"}),Object(u.jsx)(Ne.a,{axisLine:!1,tick:!1,padding:{top:20}}),Object(u.jsx)(Oe.a,{cursor:!1,contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px",transform:"translate(-60%, -100%)"}}),Object(u.jsx)(Le.a,{type:"monotone",dataKey:"value",stroke:"#B5C8FF",dot:Object(u.jsx)(Fe,{}),name:"Visites",activeDot:!1,label:i&&Object(u.jsx)(Ae,{})})]})})}),n&&Object(u.jsxs)("div",{className:"total-hot-day",children:[Object(u.jsx)("h2",{children:"moyenne des visites en semaine"}),Object(u.jsx)("p",{children:n.reduce((function(e,t){return e+t.value}),0)}),Object(u.jsx)("div",{className:"download-data",onClick:this.exportChart,style:{display:i?"none":"flex"},children:Object(u.jsx)("p",{children:"Exporter en PNG"})})]})]})]})}}]),n}(a.Component),Te=n(403),Me=n(210),Ie=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={data:null,date:[new Date(new Date-26784e5),new Date],weekDays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],calendarClicked:!1,selectDayClicked:!1,isCheckboxes:!0,plotLegend:!1},e.colors=["#ffb0b0","#fac696","#f7e68f","#a7f2a5","#96f2ef","#b5c8ff","#F5C7FF","#C4C4C4"],e.chartRef=Object(a.createRef)(),e.setStartDate=function(t){var n=e.state.weekDays;e.setState({date:t},(function(){return C.hotTime({dates:t,weekDays:n}).then((function(t){e.setState({data:t}),e.setState({calendarClicked:!1})})).catch((function(e){return console.log(e)}))}))},e.handleToggleDay=function(t){var n=e.state.date,a=new Date(Date.UTC(n[0].getFullYear(),n[0].getMonth(),n[0].getDate())),i=new Date(Date.UTC(n[1].getFullYear(),n[1].getMonth(),n[1].getDate(),23,59,59)),c=e.state.weekDays,s=t.target.name,r=c.indexOf(s);r>0?c.splice(r,1):c.push(s),C.hotTime({dates:[a,i],weekDays:c}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked}),e.setState({selectDayClicked:!1})},e.openFilterDay=function(){e.setState({selectDayClicked:!e.state.selectDayClicked}),e.setState({calendarClicked:!1})},e.leaveSelectDay=function(){e.setState({selectDayClicked:!1,calendarClicked:!1})},e.exportChart=function(){e.setState({plotLegend:!0},(function(){Object(ge.exportComponentAsPNG)(e.chartRef),e.setState({plotLegend:!1})}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date,n=new Date(Date.UTC(t[0].getFullYear(),t[0].getMonth(),t[0].getDate())),a=new Date(Date.UTC(t[1].getFullYear(),t[1].getMonth(),t[1].getDate(),23,59,59));C.hotTime({dates:[n,a]}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.calendarClicked,i=t.isCheckboxes,c=t.selectDayClicked,s=t.weekDays,r=t.data,o=t.plotLegend,l=n[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),d=n[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return this.state.value&&(this.state.status.name,this.state.status.visit),Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(ye,{setStartDate:this.setStartDate,date:n,handleToggleDay:this.handleToggleDay,weekDays:s,title:"heures d'affluence",calendarClicked:a,selectDayClicked:c,openCalendar:this.openCalendar,openFilterDay:this.openFilterDay,isCheckboxes:i,leaveSelectDay:this.leaveSelectDay}),Object(u.jsx)("div",{className:"background-container-hot-time",ref:this.chartRef,children:Object(u.jsxs)("div",{className:"Graph-container",children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",l," au ",d]})}),this.state.data&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(je.a,{width:"100%",height:"50%",children:Object(u.jsxs)(Te.a,{data:this.state.data,children:[Object(u.jsx)(De.a,{dataKey:"name",tick:{fill:"#706C7A",fontSize:14},tickMargin:15,tickLine:!1,axisLine:!1}),Object(u.jsx)(Oe.a,{cursor:!1,contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px"}}),Object(u.jsx)(Me.a,{dataKey:"value",fill:"#000000",name:"Visites",label:o&&{position:"top",fill:"black"},children:r.map((function(t,n){return Object(u.jsx)(ve.a,{fill:e.colors[n%e.colors.length]},"cell-".concat(n))}))})]})})}),Object(u.jsx)("div",{className:"download-data",onClick:this.exportChart,style:{display:o?"none":"flex"},children:Object(u.jsx)("p",{children:"Exporter en PNG"})})]})})]})}}]),n}(a.Component),Ve=n(211),Re=function(e){return e.map((function(e){return{categoryName:e.category.name,categoryIsActive:e.category.isActive?"actif":"archiv\xe9",contactTypeName:e.contactType.name,contactTypeIsActive:e.contactType.isActive?"actif":"archiv\xe9",date:e.date}}))},Pe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={data:null,date:[new Date,new Date],calendarClicked:!1,isLoading:!0},e.setStartDate=function(t){e.setState({date:t,isLoading:!0},(function(){return C.getVisitsDateRange({dates:t}).then((function(t){return e.setState({data:Re(t),isLoading:!1})})).catch((function(e){return console.log(e)}))})),e.setState({calendarClicked:!1})},e.leaveSelectDay=function(){e.setState({selectDayClicked:!1,calendarClicked:!1})},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date[0].toISOString().substring(0,10)+" 00:00:00",n=this.state.date[1].toISOString().substring(0,10)+" 23:59:59";C.getVisitsDateRange({dates:[t,n]}).then((function(t){return e.setState({data:Re(t),isLoading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.date,n=e.data,a=e.calendarClicked,i=e.isLoading,c=t[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),s=t[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(ye,{setStartDate:this.setStartDate,calendarClicked:a,openCalendar:this.openCalendar,date:t,title:"export",leaveSelectDay:this.leaveSelectDay}),Object(u.jsxs)("div",{className:"export",children:[Object(u.jsx)("h1",{children:"R\xe9cup\xe9rer la liste des visites du"}),Object(u.jsxs)("p",{children:[c," au ",s]}),n&&Object(u.jsxs)(u.Fragment,{children:[!i&&Object(u.jsx)(Ve.CSVLink,{data:this.state.data,className:"download-data",separator:";",children:"T\xe9l\xe9charger les donn\xe9es"}),i&&Object(u.jsx)("div",{className:"download-data",children:Object(u.jsx)("p",{children:"Chargement des donn\xe9es"})})]})]})]})}}]),n}(a.Component),Ee=(n(396),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{id:"not-found",children:[Object(u.jsx)("h1",{children:"404 bitch !"}),Object(u.jsx)("img",{src:"https://media.tenor.co/images/68a83f039448147d2d56c179e43bb474/raw",alt:"RuPaul GIF"})]})}}]),n}(a.Component));var He=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(I,{}),Object(u.jsx)("div",{id:"left-side",children:Object(u.jsx)(J,{})}),Object(u.jsx)("div",{id:"right-side",children:Object(u.jsxs)(r.d,{children:[Object(u.jsx)(r.b,{exact:!0,path:"/",component:E}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/categories-repartition",component:ke}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/jour-affluence",component:Ue}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/heure-affluence",component:Ie}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/exporter",component:Pe}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/new-visit",component:ce}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/update-visit",component:se}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/history",component:W}),Object(u.jsx)(p,{protectionLevel:"admin",exact:!0,path:"/parameters",component:pe}),Object(u.jsx)(p,{protectionLevel:"admin",exact:!0,path:"/users",component:T}),Object(u.jsx)(p,{protectionLevel:"volunteer",path:"*",component:Ee})]})})]})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,406)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))},Be=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(u.jsx)(d.Provider,{value:e,children:this.props.children})}}]),n}(a.Component);s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(H.a,{children:Object(u.jsx)(Be,{children:Object(u.jsx)(He,{})})})}),document.getElementById("root")),_e()}},[[397,1,2]]]);
//# sourceMappingURL=main.d39d1d0f.chunk.js.map