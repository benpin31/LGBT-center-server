(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},217:function(e,t,n){},243:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(77),c=n.n(i),r=(n(217),n(21)),o=n(47),l=n(183),d=s.a.createContext(),u=n(1),h=function(e){return function(t){return Object(u.jsx)(d.Consumer,{children:function(n){return Object(u.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{context:n}))}})}},p=h((function(e){var t=e.component,n=e.context,a=e.protectionLevel,s=Object(l.a)(e,["component","context","protectionLevel"]);return n.isLoading?null:n.isLoggedIn?"volunteer"===a||n.user.isAdmin?Object(u.jsx)(r.b,Object(o.a)(Object(o.a)({},s),{},{render:function(e){return Object(u.jsx)(t,Object(o.a)({},e))}})):Object(u.jsx)(r.a,{to:"/new-visit"}):Object(u.jsx)(r.a,{to:"/"})})),j=n(9),b=n(10),m=n(11),f=n(12),v=n.p+"static/media/trash-icon.adbd3cc3.svg",O=n.p+"static/media/edit-icon.0d2adfe8.svg",g=n(187),x=n.n(g).a.create({baseURL:"https://centre-lgbtqiplus-idf.herokuapp.com",withCredentials:!0});function C(e){if(e.response.data)throw e;throw e}var y={service:x,signin:function(e){return x.post("/api/auth/signin",e).then((function(e){return e.data})).catch(C)},isLoggedIn:function(){return x.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(C)},logout:function(){return x.get("/api/auth/logout").then((function(e){return e.data})).catch(C)},getUsers:function(){return x.get("/api/user").then((function(e){return e.data})).catch(C)},getOneUser:function(e){return x.get("/api/user".concat(e)).then((function(e){return e.data})).catch(C)},createUser:function(e){return x.post("/api/user/create",e).then((function(e){return e.data})).catch(C)},deleteUser:function(e){return x.delete("/api/user/delete/".concat(e)).then((function(e){return e.data})).catch(C)},updateUser:function(e,t){return x.patch("/api/user/edit/".concat(e),t).then((function(e){return e.data})).catch(C)},getVisits:function(){return x.get("/api/visits").then((function(e){return e.data})).catch(C)},createVisit:function(e){return x.post("/api/visits",e).then((function(e){return e.data})).catch(C)},updateVisit:function(e,t){return x.patch("/api/visits/".concat(e),t).then((function(e){return e.data})).catch(C)},deleteVisit:function(e){return x.delete("/api/visits/".concat(e)).then((function(e){return e.data})).catch(C)},getCategories:function(){return x.get("/api/categories").then((function(e){return e.data})).catch(C)},createCategory:function(e){return x.post("/api/categories",e).then((function(e){return e.data})).catch(C)},updateCategory:function(e,t){return x.patch("/api/categories/".concat(e),t).then((function(e){return e.data})).catch(C)},getContactTypes:function(){return x.get("/api/contactTypes").then((function(e){return e.data})).catch(C)},createContactType:function(e){return x.post("/api/contactTypes",e).then((function(e){return e.data})).catch(C)},updateContactType:function(e,t){return x.patch("/api/contactTypes/".concat(e),t).then((function(e){return e.data})).catch(C)},repartitionByCategory:function(e){return x.post("api/insight/get-category-repartition",e).then((function(e){return e.data})).catch(C)},hotTime:function(e){return x.post("api/insight/get-popular-hours",e).then((function(e){return e.data})).catch(C)},repartitionByWeeks:function(e){return x.post("api/insight/get-popular-days",e).then((function(e){return e.data})).catch(C)}},k=(n(243),h(function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isHovering:!1},e.handleDelete=function(t){y.deleteUser(t).then((function(t){e.props.getAllUsers()})).catch((function(e){return console.log(e)}))},e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainerAdminsVolunteer",children:[this.props.users.isAdmin&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"card-info-admins-volunteer",children:[Object(u.jsx)("div",{children:"Admin"}),Object(u.jsx)("p",{children:this.props.users.login})]}),this.state.isHovering&&Object(u.jsxs)("aside",{children:[!this.props.context.isLoading&&this.props.context.user._id===this.props.users._id&&Object(u.jsx)("img",{onClick:this.props.handlePopup,src:O,alt:"edit-icon"}),!this.props.context.isLoading&&this.props.context.user._id!==this.props.users._id&&Object(u.jsx)("img",{onClick:function(){return e.handleDelete(e.props.users._id)},src:v,alt:"trash-icon"})]})]}),!this.props.users.isAdmin&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"card-info-admins-volunteer",children:[Object(u.jsx)("div",{children:"B\xe9n\xe9vole"}),Object(u.jsx)("p",{children:this.props.users.login})]}),this.state.isHovering&&Object(u.jsx)("aside",{onClick:this.props.handlePopup,children:Object(u.jsx)("img",{src:O,alt:"edit-icon"})})]})]})}}]),n}(a.Component))),S=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)(u.Fragment,{children:this.props.users&&this.props.users.map((function(t){return t.isAdmin&&Object(u.jsx)(k,{users:t,handlePopup:function(){return e.props.handlePopup(t)},getAllUsers:e.props.getAllUsers},t._id)}))})}}]),n}(a.Component),w=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)(u.Fragment,{children:this.props.users&&this.props.users.map((function(t){return!t.isAdmin&&Object(u.jsx)(k,{users:t,handlePopup:function(){return e.props.handlePopup(t)},getAllUsers:e.props.getAllUsers},t._id)}))})}}]),n}(a.Component),D=n(22),N=n.n(D),F=n(34),L=n(24),U=(n(110),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={login:e.props.value?e.props.value.login:"",password:"",isAdmin:!e.props.value||e.props.value.isAdmin,isLoginLengthValidated:!0,isLoginFree:!0,isPasswordValidated:!0},e.handleChange=function(t){var n,a=t.target.name;e.setState((n={},Object(L.a)(n,a,t.target.value),Object(L.a)(n,"isLoginLengthValidated",!0),Object(L.a)(n,"isPasswordValidated",!0),n))},e.handleSubmit=function(){var t=Object(F.a)(N.a.mark((function t(n){var a,s,i,c,r,o,l,d,u;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state,s=a.login,i=a.password,c=a.isAdmin,r=e.props.users,t.prev=3,o={login:s,isAdmin:c},l=!0,d=!0,u=!0,r.find((function(t){var n;return t.login===s&&t.login!==(null===(n=e.props.value)||void 0===n?void 0:n.login)}))&&(d=!1),s.length<3&&(l=!1),i.length<3&&(0===i.length&&e.props.value||(u=!1)),l&&d&&u){t.next=12;break}return e.setState({isLoginLengthValidated:l,isLoginFree:d,isPasswordValidated:u}),t.abrupt("return");case 12:return""!==i&&(o.password=i),t.next=15,e.props.formAction(o);case 15:e.props.getAllUsers(),e.props.handlePopup(),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(3),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isLoginLengthValidated,n=e.isLoginFree,a=e.isPasswordValidated;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[this.props.action," un\xb7e utilisateur\xb7ice"]}),Object(u.jsx)("div",{className:"close-pop-up",onClick:this.props.handlePopup,children:"Annuler"})]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"form-update-create",children:[Object(u.jsx)("label",{htmlFor:"login",children:"nom utilisateur.ice"}),Object(u.jsx)("input",{onChange:this.handleChange,value:this.state.login,type:"text",name:"login",id:t&&n?"":"error-input"}),!t&&Object(u.jsx)("div",{className:"error-message user-name-error",children:Object(u.jsx)("p",{children:"Le login doit contenir au moins 3 caract\xe8res."})}),!n&&Object(u.jsx)("div",{className:"error-message user-name-error",children:Object(u.jsx)("p",{children:"Ce nom d\u2019utilisateur est d\xe9j\xe0 pris."})}),Object(u.jsx)("label",{htmlFor:"password",children:"mot de passe"}),Object(u.jsx)("input",{onChange:this.handleChange,value:this.props.password,type:"password",name:"password",placeholder:"ajouter"===this.props.action?"":"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf",id:a&&n?"":"error-input"}),!a&&Object(u.jsx)("div",{className:"error-message name-error-contact",children:Object(u.jsx)("p",{children:"Le mot de passe doit contenir au moins 3 caract\xe8res."})}),Object(u.jsx)("button",{children:this.props.action[0].toUpperCase()+this.props.action.substr(1)})]})]})})}}]),n}(a.Component)),A=(n(245),n.p+"static/media/plus-icon.cc463e15.svg"),M=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={users:null,isShownCreate:!1,isShownUpdate:null},e.getAllUsers=function(){y.getUsers().then((function(t){return e.setState({users:t})})).catch((function(e){return console.log(e)}))},e.handlePopupCreate=function(){e.setState({isShownCreate:!e.state.isShownCreate,isShownUpdate:null})},e.handlePopupUpdate=function(t){e.setState({isShownUpdate:t,isShownCreate:!1})},e.handleHidePopup=function(){e.setState({isShownUpdate:null,isShownCreate:!1})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.getUsers().then((function(t){return e.setState({users:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{id:"settings-users",children:[Object(u.jsxs)("div",{id:"header-users",children:[Object(u.jsx)("h1",{children:"utilisateur\xb7ices"}),Object(u.jsxs)("button",{onClick:this.handlePopupCreate,children:[Object(u.jsx)("img",{src:A,alt:"plus-icon"}),Object(u.jsx)("p",{children:"Ajouter un\xb7e utilisateur\xb7ice"})]})]}),Object(u.jsx)("div",{className:"users-container",children:Object(u.jsx)(S,{users:this.state.users,handlePopup:this.handlePopupUpdate,getAllUsers:this.getAllUsers})}),Object(u.jsx)("div",{className:"users-container",children:Object(u.jsx)(w,{users:this.state.users,handlePopup:this.handlePopupUpdate,getAllUsers:this.getAllUsers})}),this.state.isShownCreate&&Object(u.jsx)(U,{formAction:y.createUser,handlePopup:this.handleHidePopup,getAllUsers:this.getAllUsers,users:this.state.users,action:"ajouter"}),this.state.isShownUpdate&&Object(u.jsx)(U,{formAction:function(t){return y.updateUser(e.state.isShownUpdate._id,t)},handlePopup:this.handleHidePopup,getAllUsers:this.getAllUsers,value:this.state.isShownUpdate,users:this.state.users,action:"modifier"})]})}}]),n}(a.Component),V=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsx)(u.Fragment,{children:"/"!==this.props.location.pathname&&Object(u.jsx)("div",{id:"header-flag",children:["red","orange","yellow","green","blue","purple"].map((function(e){return Object(u.jsx)("div",{id:e},e)}))})})}}]),n}(a.Component),I=Object(r.g)(V),T=(n(147),n.p+"static/media/logo.8ab0c1bf.svg"),P=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handleSubmit=function(){var t=Object(F.a)(N.a.mark((function t(n){var a,s,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.state,s=a.username,i=a.password,t.prev=2,t.next=5,e.props.onLoggedIn({login:s,password:i});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isValidSignin,a=t.updateValidSignin;return Object(u.jsxs)("div",{className:"form-container",children:[Object(u.jsx)("img",{src:T,alt:""}),Object(u.jsxs)("form",{className:"form-signin",onSubmit:this.handleSubmit,children:[Object(u.jsx)("label",{htmlFor:"username",children:"Nom d'utilisateur"}),Object(u.jsx)("input",Object(L.a)({onChange:function(t){e.setState({username:t.target.value}),a()},value:this.state.username,type:"text",id:"username",name:"username"},"id",n?"":"error-input")),Object(u.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(u.jsx)("input",Object(L.a)({onChange:function(t){e.setState({password:t.target.value}),a()},value:this.state.password,type:"password",id:"password",name:"password "},"id",n?"":"error-input")),!n&&Object(u.jsx)("div",{className:"error-message",children:Object(u.jsx)("p",{children:"Invalid credentials"})}),Object(u.jsx)("button",{children:"Connexion"})]})]})}}]),n}(a.Component),H=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={signInStyle:null,flagStyle:null,helloStyle:null,isValidSignin:!0},e.handleLoggedin=function(t){y.signin(t).then((function(t){e.props.context.setUser(t),e.setState({signInStyle:{display:"block",transform:"translateY(-100%)",animation:"outro-sweep 1s ease-out"},helloStyle:{display:"none"}}),setTimeout((function(){e.setState({flagStyle:{display:"block",transform:"translateY(calc(-100% + 6px))",animation:"outro-sweep 0.5s ease-out"}})}),700),setTimeout((function(){return e.props.history.push("/history")}),1500)})).catch((function(t){e.setState({isValidSignin:!1}),console.log(t)}))},e.updateValidSignin=function(){e.setState({isValidSignin:!0})},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;e.context.isLoading!==this.props.context.isLoading&&(this.props.context.isLoggedIn?this.props.history.push("/new-visit"):(setTimeout((function(){t.setState({signInStyle:{display:"block",animation:"signinsweep 0.9s ease-out"}})}),900),setTimeout((function(){t.setState({helloStyle:{display:"block"}})}),700)))}},{key:"componentDidMount",value:function(){var e=this;!this.props.context.isLoggedIn&!this.props.context.isLoading&&(setTimeout((function(){e.setState({signInStyle:{display:"block",animation:"signinsweep 0.9s ease-out"}})}),900),setTimeout((function(){e.setState({helloStyle:{display:"block"}})}),700))}},{key:"render",value:function(){var e=this,t=this.state.isValidSignin;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{id:"signin",style:this.state.signInStyle,children:Object(u.jsx)(P,{onLoggedIn:this.handleLoggedin,isValidSignin:t,updateValidSignin:this.updateValidSignin})}),Object(u.jsxs)("div",{id:"flag-container",children:[Object(u.jsx)("p",{style:this.state.helloStyle,children:"bonjour"}),["red","orange","yellow","green","blue","purple"].map((function(t){return Object(u.jsx)("div",{id:t,style:e.state.flagStyle},t)}))]})]})}}]),n}(s.a.Component),_=Object(r.g)(h(H)),E=n(26),R=(n(246),n.p+"static/media/exit-icon.ee9ecdda.svg"),B=n.p+"static/media/drop-down-downarrow.55d8cc96.svg",z=n.p+"static/media/drop-down-uparrow.3d642aba.svg",J=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={rapportClicked:!1},e.handleOpen=function(){e.setState({rapportClicked:!e.state.rapportClicked})},e.handleClose=function(){e.setState({rapportClicked:!1})},e.handleLogout=function(){var t=e.props.context;y.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.context,t=this.state.rapportClicked;return Object(u.jsx)(u.Fragment,{children:"/"!==this.props.location.pathname&&Object(u.jsxs)("div",{id:"DashboardNavBar",children:[Object(u.jsx)("img",{className:"logo",src:T,alt:""}),Object(u.jsx)(E.c,{exact:!0,to:"/history",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Visites"}),Object(u.jsxs)("div",{className:"rapport-container",children:[Object(u.jsxs)("div",{className:"rapport",onClick:this.handleOpen,children:[Object(u.jsx)("p",{children:"Rapport"}),Object(u.jsx)("img",{src:t?z:B,alt:""})]}),t&&Object(u.jsxs)("div",{className:"drop-down-rapport",children:[Object(u.jsx)(E.c,{exact:!0,to:"/categories-repartition",className:"sublink",activeClassName:"selected",children:"R\xe9partition des visites"}),Object(u.jsx)(E.c,{exact:!0,to:"/jour-affluence",className:"sublink",activeClassName:"selected",children:"Jours d'affluence"}),Object(u.jsx)(E.c,{exact:!0,to:"/heure-affluence",className:"sublink",activeClassName:"selected",children:"Heures d'affluence"})]})]}),!e.isLoading&&e.isLoggedIn&&e.user.isAdmin&&Object(u.jsx)(E.c,{exact:!0,to:"/parameters",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Param\xe8tres"}),!e.isLoading&&e.isLoggedIn&&e.user.isAdmin&&Object(u.jsx)(E.c,{exact:!0,to:"/users",className:"link",activeClassName:"selected",onClick:this.handleClose,children:"Utilisateur\xb7ices"}),Object(u.jsxs)("div",{className:"logout",onClick:this.handleLogout,children:[Object(u.jsx)("img",{src:R,alt:""}),Object(u.jsx)("p",{children:"D\xe9connexion"})]})]})})}}]),n}(a.Component),Y=h(Object(r.g)(J)),G=(n(247),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isHovering:!1},e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.isHovering,t=this.props,n=t.visit,a=t.onDelete,s=new Date(n.date),i=s.getHours(),c=s.getMinutes();return Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainer",children:[Object(u.jsxs)("div",{className:"card-info",children:[Object(u.jsx)("p",{children:"".concat(i,"h").concat(c)}),Object(u.jsx)("div",{children:n.category.name}),Object(u.jsx)("div",{children:n.contactType.name})]}),e&&Object(u.jsxs)("aside",{children:[Object(u.jsx)(E.b,{to:{pathname:"/update-visit",state:{visitId:n}},children:Object(u.jsx)("img",{src:O,alt:""})}),Object(u.jsx)("img",{onClick:function(){return a(n._id)},src:v,alt:""})]})]})}}]),n}(a.Component)),K=(n(248),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={allVisits:null},e.onDelete=function(t){y.deleteVisit(t).then((function(t){var n=e.state.allVisits.filter((function(e){return e._id!==t._id}));e.setState({allVisits:n})}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.getVisits().then((function(t){e.setState({allVisits:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.allVisits;return Object(u.jsxs)("div",{id:"History",children:[Object(u.jsxs)("div",{id:"header",children:[Object(u.jsx)("p",{children:"derni\xe8res visites"}),Object(u.jsx)(E.b,{exact:"true",to:"/new-visit",className:"link",children:Object(u.jsxs)("button",{children:[Object(u.jsx)("img",{src:A,alt:""}),Object(u.jsx)("p",{children:"Ajouter une visite "})]})})]}),t&&t.map((function(t){return Object(u.jsx)(G,{visit:t,onDelete:e.onDelete},t._id)}))]})}}]),n}(a.Component)),W=n.p+"static/media/info-icon.d796eed5.svg",q=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isHoveringCardCat:!1,isHoveringInfoIcon:!1},e.handleMouseEnter=function(t){e.setState(Object(L.a)({},t,!0))},e.handleMouseLeave=function(t){e.setState(Object(L.a)({},t,!1))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.category,a=t.handleSelectItem,s=this.state,i=s.isHoveringInfoIcon,c=s.isHoveringCardCat;return Object(u.jsxs)("div",{onMouseEnter:function(){return e.handleMouseEnter("isHoveringCardCat")},onMouseLeave:function(){return e.handleMouseLeave("isHoveringCardCat")},onClick:function(){return a(n._id,n.name,"category")},className:"cat-cont",children:[i&&Object(u.jsxs)("div",{className:"info-toolbox",children:[Object(u.jsx)("h3",{children:n.description}),Object(u.jsx)("div",{})]}),Object(u.jsx)("p",{children:n.name}),c&&Object(u.jsx)("img",{onMouseEnter:function(){return e.handleMouseEnter("isHoveringInfoIcon")},onMouseLeave:function(){return e.handleMouseLeave("isHoveringInfoIcon")},src:W,alt:""})]})}}]),n}(a.Component),Q=(n(249),n.p+"static/media/purple-plus-icon.e544e5d6.svg"),X=n.p+"static/media/minus-icon.6e71681a.svg",Z=n.p+"static/media/wait-icon.bf1db0d1.svg",$=n.p+"static/media/check-icon.36bd77f3.svg",ee=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={nbOfPerson:1,date:new Date,category:null,contactType:null,allCategories:null,allContactTypes:null,visitToUpdate:null,isUpdateVisit:!1},e.handleDecrease=function(){e.state.nbOfPerson>1&&e.setState({nbOfPerson:e.state.nbOfPerson-1})},e.handleIncrease=function(){e.setState({nbOfPerson:e.state.nbOfPerson+1})},e.handleSelectItem=function(t,n,a){e.setState(Object(L.a)({},a,{id:t,name:n}))},e.handleChangeItem=function(t){var n;e.setState((n={},Object(L.a)(n,t,null),Object(L.a)(n,"isUpdateVisit",!1),n))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.nbOfPerson,s=n.category,i=n.contactType,c=n.visitToUpdate;if(c)y.updateVisit(c._id,{date:c.date,category:s.id,contactType:i.id}).then((function(){return e.props.history.push("/history")})).catch((function(e){return console.log(e)}));else for(var r=function(t){y.createVisit({category:s.id,contactType:i.id}).then((function(){t===a-1&&e.props.history.push("/history")})).catch((function(e){return console.log(e)}))},o=0;o<a;o++)r(o)},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.getCategories().then((function(t){var n=t.filter((function(e){return e.isActive}));e.setState({allCategories:n})})).catch((function(e){return console.log(e)})),y.getContactTypes().then((function(t){var n=t.filter((function(e){return e.isActive}));e.setState({allContactTypes:n})})).catch((function(e){return console.log(e)})),this.props.visitId&&this.setState({visitToUpdate:this.props.visitId,isUpdateVisit:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.allCategories,a=t.category,s=t.allContactTypes,i=t.contactType,c=t.date,r=t.nbOfPerson,o=t.visitToUpdate,l=t.isUpdateVisit,d=c.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return Object(u.jsxs)("form",{onSubmit:this.handleSubmit,id:"CreateForm",children:[!o&&Object(u.jsxs)("div",{id:"first-form",children:[Object(u.jsxs)("div",{id:"nb-of-person",children:[Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"nombre de personnes"}),r&&Object(u.jsx)("img",{src:$,alt:""})]}),Object(u.jsxs)("div",{className:"input-content",children:[Object(u.jsx)("img",{onClick:this.handleDecrease,src:X,alt:""}),Object(u.jsxs)("p",{className:"validated-input",children:[r," personne",r>1?"s":""]}),Object(u.jsx)("img",{onClick:this.handleIncrease,src:Q,alt:""})]})]}),Object(u.jsxs)("div",{id:"date",children:[Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"date"}),c&&Object(u.jsx)("img",{src:$,alt:""})]}),Object(u.jsx)("div",{className:"input-content",children:Object(u.jsx)("p",{className:"validated-input",children:d})})]})]}),Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"service du centre demand\xe9"}),a&&Object(u.jsx)("img",{src:$,alt:""})]}),Object(u.jsx)("div",{className:"cat-cont-container",children:!l&&!a&&n&&n.map((function(t){return Object(u.jsx)(q,{category:t,handleSelectItem:e.handleSelectItem},t._id)}))}),a&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("category")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:a.name}),Object(u.jsx)("img",{src:O,alt:""})]}),l&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("category")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:o.category.name}),Object(u.jsx)("img",{src:O,alt:""})]}),Object(u.jsxs)("div",{className:"input-header",children:[Object(u.jsx)("h2",{children:"mode de contact utilis\xe9"}),!a&&Object(u.jsx)("img",{src:Z,alt:""}),i&&a&&Object(u.jsx)("img",{src:$,alt:""})]}),Object(u.jsx)("div",{className:"cat-cont-container",children:a&&!i&&s&&s.map((function(t){return Object(u.jsx)("div",{onClick:function(){return e.handleSelectItem(t._id,t.name,"contactType")},className:"cat-cont",children:Object(u.jsx)("p",{children:t.name})},t._id)}))}),a&&i&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("contactType")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:i.name}),Object(u.jsx)("img",{src:O,alt:""})]}),l&&Object(u.jsxs)("div",{onClick:function(){return e.handleChangeItem("contactType")},className:"selected-cat-cont",children:[Object(u.jsx)("p",{className:"validated-input",children:o.contactType.name}),Object(u.jsx)("img",{src:O,alt:""})]}),a&&i&&Object(u.jsx)("button",{children:"Enregistrer"})]})}}]),n}(a.Component),te=Object(r.g)(ee),ne=(n(250),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).handleCancel=function(){e.props.history.push("/history")},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"FormHeader",children:[Object(u.jsx)("h1",{children:this.props.title}),Object(u.jsxs)("button",{onClick:this.handleCancel,children:[" ",Object(u.jsx)("p",{children:" Annuler "})," "]})]})}}]),n}(a.Component)),ae=Object(r.g)(ne),se=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ae,{title:"ajouter une nouvelle visite"}),Object(u.jsx)(te,{})]})}}]),n}(a.Component),ie=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(ae,{title:"modifier une visite"}),this.props.location.state.visitId&&Object(u.jsx)(te,{visitId:this.props.location.state.visitId})]})}}]),n}(a.Component),ce=n.p+"static/media/archive-icon.3b723ef2.svg",re=n.p+"static/media/on-off-icon.3d90d127.svg",oe=(n(251),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isHovering:!1},e.onOffItem=Object(F.a)(N.a.mark((function t(){var n,a,s,i,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.item,a=n._id,s=n.isActive,i=n.name,c=n.description,r=e.props.handleUpdateView,console.log(a),t.prev=3,t.next=6,e.props.updateItem(a,{name:i,description:c,isActive:!s});case 6:r(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),r();case 13:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.handleMouseEnterCard=function(){e.setState({isHovering:!0})},e.handleMouseLeaveCard=function(){e.setState({isHovering:!1})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.handleOpenUpdate;return Object(u.jsxs)("div",{onMouseEnter:this.handleMouseEnterCard,onMouseLeave:this.handleMouseLeaveCard,className:"CardContainerItem",children:[Object(u.jsxs)("div",{className:"left-container",children:[Object(u.jsx)("div",{className:"status-container",children:Object(u.jsx)("p",{children:t.isActive?"actif":"archiv\xe9"})}),Object(u.jsx)("p",{children:t.name})]}),this.state.isHovering&&t.isActive&&Object(u.jsxs)("aside",{children:[Object(u.jsx)("img",{src:O,alt:"edit-icone",onClick:n}),Object(u.jsx)("img",{src:ce,alt:"archive-icon",onClick:this.onOffItem})]}),this.state.isHovering&&!t.isActive&&Object(u.jsx)("aside",{children:Object(u.jsx)("img",{src:re,alt:"archive-icon",onClick:this.onOffItem})})]})}}]),n}(a.Component)),le=(n(252),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={items:null,showCreateForm:!1,showUpdateForm:null},e.handleUpdateView=Object(F.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.getAllItmes();case 3:n=t.sent,e.setState({items:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleOpenCreate=function(){e.setState({showUpdateForm:null,showCreateForm:!0})},e.handleOpenUpdate=function(t){e.setState({showCreateForm:!1,showUpdateForm:t})},e.handleCloseCreate=function(){e.setState({showCreateForm:!1})},e.handleCloseUpdate=function(){e.setState({showUpdateForm:null})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(F.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.getAllItmes();case 3:t=e.sent,this.setState({items:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,a=this.props,s=a.title,i=a.buttonName,c=a.updateItem,r=a.FormCreateUpdateComponent,o=a.formCreateAction,l=this.state,d=l.items,h=l.showCreateForm,p=l.showUpdateForm,j="Type de contact"===s?"un type de contact":"une cat\xe9gorie";return d&&(e=d.filter((function(e){return e.isActive})),t=d.filter((function(e){return!e.isActive}))),Object(u.jsxs)("div",{id:"item-collection-container",children:[Object(u.jsxs)("div",{id:"header-cat-cont",children:[Object(u.jsx)("p",{children:s}),Object(u.jsxs)("div",{onClick:this.handleOpenCreate,children:[Object(u.jsx)("img",{src:A,alt:"plus-icon"}),Object(u.jsx)("p",{children:i})]})]}),d&&Object(u.jsxs)("div",{id:"items-container",children:[Object(u.jsx)("div",{className:"dashboard-cat-cont",children:e.map((function(e){return Object(u.jsx)(oe,{item:e,updateItem:c,handleOpenUpdate:function(){return n.handleOpenUpdate(e)},handleUpdateView:n.handleUpdateView},e._id)}))}),Object(u.jsx)("div",{className:"dashboard-cat-cont",children:t.map((function(e){return Object(u.jsx)(oe,{item:e,updateItem:c,handleOpenUpdate:function(){return n.handleOpenUpdate(e)},handleUpdateView:n.handleUpdateView},e._id)}))})]}),h&&Object(u.jsx)(r,{formName:"Ajouter "+j,formAction:o,handleUpdateView:this.handleUpdateView,closeForm:this.handleCloseCreate}),p&&Object(u.jsx)(r,{formName:"Modifier "+j,formAction:function(e){return c(n.state.showUpdateForm._id,e)},handleUpdateView:this.handleUpdateView,closeForm:this.handleCloseUpdate,values:this.state.showUpdateForm})]})}}]),n}(a.Component)),de=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={name:e.props.values?e.props.values.name:"",description:e.props.values?e.props.values.description:"",isNameValidated:!0,isdescriptionValidated:!0},e.handleSubmit=function(){var t=Object(F.a)(N.a.mark((function t(n){var a,s,i,c,r,l,d;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props,s=a.formAction,i=a.handleUpdateView,c=a.closeForm,r=e.state,l=r.name,d=r.description,!(l.length<3||d.length<3)){t.next=6;break}return e.setState({isNameValidated:l.length>=3,isdescriptionValidated:d.length>=3}),t.abrupt("return");case 6:return t.prev=6,t.next=9,s(Object(o.a)(Object(o.a)({},e.state),{},{isActive:!0}));case 9:i(),c(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0),c();case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n;e.setState((n={},Object(L.a)(n,t.target.name,t.target.value),Object(L.a)(n,"isNameValidated",!0),Object(L.a)(n,"isdescriptionValidated",!0),n))},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.values){var t=e.values.name;this.props.values.name!==t&&this.setState({name:this.props.values.name})}}},{key:"render",value:function(){var e=this.props,t=e.formName,n=e.closeForm,a=this.state,s=a.name,i=a.description,c=a.isNameValidated,r=a.isdescriptionValidated;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:t}),Object(u.jsx)("div",{className:"close-pop-up",onClick:n,children:"Annuler"})]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"form-update-create",children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name"}),Object(u.jsx)("input",{type:"text",name:"name",value:s,onChange:this.handleChange,id:c?"":"error-input"}),!c&&Object(u.jsx)("div",{className:"error-message name-error",children:Object(u.jsx)("p",{children:"Le nom doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("label",{htmlFor:"description",children:"Description"}),Object(u.jsx)("textarea",{name:"description",value:i,onChange:this.handleChange,id:r?"":"error-input"}),!r&&Object(u.jsx)("div",{className:"error-message description-error",children:Object(u.jsx)("p",{children:"La description doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("button",{children:"Submit"})]})]})})}}]),n}(a.Component),ue=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={name:e.props.values?e.props.values.name:"",isNameValidated:!0},e.handleChange=function(t){e.setState({name:t.target.value,isNameValidated:!0})},e.handleSubmit=function(){var t=Object(F.a)(N.a.mark((function t(n){var a,s,i,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props,s=a.formAction,i=a.handleUpdateView,c=a.closeForm,!((r=e.state.name).length<3)){t.next=6;break}return e.setState({isNameValidated:!1}),t.abrupt("return");case 6:return t.prev=6,t.next=9,s({name:r,isActive:!0});case 9:i(),c(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0),c();case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.values){var t=e.values.name;this.props.values.name!==t&&this.setState({name:this.props.values.name})}}},{key:"render",value:function(){var e=this.props,t=e.formName,n=e.closeForm,a=this.state,s=a.name,i=a.isNameValidated;return Object(u.jsx)("div",{className:"shadow-pop-up",children:Object(u.jsxs)("div",{className:"FormCreateUpdateContact",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:t}),Object(u.jsx)("div",{className:"close-pop-up",onClick:n,children:"Annuler"})]}),Object(u.jsxs)("form",{className:"form-update-create",onSubmit:this.handleSubmit,children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name"}),Object(u.jsx)("input",{type:"text",name:"name",value:s,onChange:this.handleChange,id:i?"":"error-input"}),!i&&Object(u.jsx)("div",{className:"error-message name-error-contact",children:Object(u.jsx)("p",{children:"Le nom doit contenir au moins 3 caract\xe8res"})}),Object(u.jsx)("button",{children:"Submit"})]})]})})}}]),n}(a.Component);var he=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(le,{title:"Cat\xe9gories",buttonName:"Ajouter une cat\xe9gorie",getAllItmes:y.getCategories,FormCreateUpdateComponent:de,updateItem:y.updateCategory,formCreateAction:y.createCategory}),Object(u.jsx)(le,{title:"Type de contact",buttonName:"Ajouter un type de contact",getAllItmes:y.getContactTypes,FormCreateUpdateComponent:ue,updateItem:y.updateContactType,formCreateAction:y.createContactType})]})},pe=n(387),je=n(394),be=n(200),me=n(99),fe=n(86),ve=(n(148),n(149),n(207)),Oe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.calendarClicked,n=e.setStartDate,a=e.openCalendar,s=e.date,i=e.selectDayClicked,c=e.openFilterDay,r=e.weekDays,o=e.leaveSelectDay,l=e.title;return Object(u.jsxs)("div",{className:"Graph-header",children:[Object(u.jsx)("h2",{children:l}),Object(u.jsxs)("div",{className:"filter-container",children:[this.props.isCheckboxes&&Object(u.jsxs)("div",{className:"select-day-container",children:[Object(u.jsx)("p",{className:i?"selected-filter":"",onClick:c,children:"Choisir jours"}),i&&Object(u.jsxs)("div",{onMouseLeave:o,className:"select-day-drop-down",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Lundi",children:"Lundi"}),Object(u.jsx)("input",{type:"checkbox",name:"Lundi",id:"Lundi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Lundi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Mardi",children:"Mardi"}),Object(u.jsx)("input",{type:"checkbox",name:"Mardi",id:"Mardi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Mardi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Mercredi",children:"Mercredi"}),Object(u.jsx)("input",{type:"checkbox",name:"Mercredi",id:"Mercredi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Mercredi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Jeudi",children:"Jeudi"}),Object(u.jsx)("input",{type:"checkbox",name:"Jeudi",id:"Jeudi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Jeudi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Vendredi",children:"Vendredi"}),Object(u.jsx)("input",{type:"checkbox",name:"Vendredi",id:"Vendredi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Vendredi")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"Samedi",children:"Samedi"}),Object(u.jsx)("input",{type:"checkbox",name:"Samedi",id:"Samedi",onChange:this.props.handleToggleDay,defaultChecked:r.includes("Samedi")})]})]})]}),Object(u.jsx)("p",{className:t?"selected-filter":"",onClick:a,children:"Choisir dates"}),t&&Object(u.jsx)("div",{onMouseLeave:o,children:Object(u.jsx)(ve.a,{onChange:n,selectRange:!0,value:s,className:"small-calendar"})})]})]})}}]),n}(a.Component),ge=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={data:null,date:[new Date,new Date],calendarClicked:!1},e.colors=["#ffb0b0","#fac696","#f7e68f","#a7f2a5","#96f2ef","#b5c8ff","#F5C7FF","#C4C4C4"],e.setStartDate=function(t){e.setState({date:t},(function(){return y.repartitionByCategory({dates:t}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))})),e.setState({calendarClicked:!1})},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date[0].toISOString().substring(0,10)+" 00:00:00",n=this.state.date[1].toISOString().substring(0,10)+" 23:59:59";y.repartitionByCategory({dates:[t,n]}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.data,s=t.calendarClicked,i=n[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),c=n[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(Oe,{setStartDate:this.setStartDate,calendarClicked:s,openCalendar:this.openCalendar,date:n,title:"r\xe9partitions des semaines"}),Object(u.jsx)("div",{className:"background-container",children:Object(u.jsxs)("div",{className:"Graph-container",children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",i," au ",c]})}),a&&Object(u.jsx)(pe.a,{width:"100%",height:"100%",children:Object(u.jsxs)(je.a,{children:[Object(u.jsx)(be.a,{data:a,startAngle:180,endAngle:0,dataKey:"value",outerRadius:"100%",children:a.map((function(t,n){return Object(u.jsx)(me.a,{fill:e.colors[n%e.colors.length]},"cell-".concat(n))}))}),Object(u.jsx)(fe.a,{contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px",transform:"translate(-60%, -100%)"}})]})}),Object(u.jsx)("div",{className:"bottom-container",children:a&&Object(u.jsxs)("div",{className:"total",children:[Object(u.jsx)("h2",{children:"total des visites"}),Object(u.jsx)("p",{children:a.reduce((function(e,t){return e+t.value}),0)})]})})]})})]})}}]),n}(a.Component),xe=n(391),Ce=n(101),ye=n(102),ke=n(205),Se=function(e){var t=e.cx,n=e.cy;return Object(u.jsxs)("svg",{x:t-20,y:n-20,width:80,height:80,fill:"red",viewBox:"0 0 1024 1024",children:[Object(u.jsxs)("mask",{id:"a",width:"503",height:"457",x:"17",y:"44",maskUnits:"userSpaceOnUse",children:[Object(u.jsx)("path",{fill:"#FFFFFF",d:"M60.832 87.832c58.443-58.443 153.197-58.443 211.64 0l196.645 196.645c6.248 6.248 6.248 16.379 0 22.627L280.104 496.117c-6.248 6.248-16.379 6.248-22.627 0L60.832 299.472c-58.443-58.443-58.443-153.197 0-211.64z"}),Object(u.jsx)("path",{fill:"#FFFFFF",d:"M475.758 87.832c-58.443-58.443-153.197-58.443-211.64 0L67.474 284.477c-6.249 6.248-6.249 16.379 0 22.627l189.012 189.013c6.249 6.248 16.379 6.248 22.628 0l196.644-196.645c58.443-58.443 58.443-153.197 0-211.64z"})]}),Object(u.jsxs)("g",{mask:"url(#a)",children:[Object(u.jsx)("path",{fill:"#FFB0B0",d:"M17 44h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#FAC696",d:"M17 110.143h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#F7E68F",d:"M17 176.286h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#A7F2A5",d:"M17 242.429h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#96F2EF",d:"M17 308.571h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#B5C8FF",d:"M17 374.714h503v66.143H17z"}),Object(u.jsx)("path",{fill:"#F5C7FF",d:"M17 440.857h503V507H17z"})]})]})},we=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={data:null,date:[new Date(new Date-26784e5),new Date],calendarClicked:!1},e.setStartDate=function(t){e.setState({date:t},(function(){return y.repartitionByWeeks({dates:t}).then((function(t){return e.setState({data:t.agregatedData,date:t.updatedDates.map((function(e){return new Date(e)}))})})).catch((function(e){return console.log(e)}))})),e.setState({calendarClicked:!1})},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date,n=new Date(Date.UTC(t[0].getFullYear(),t[0].getMonth(),t[0].getDate())),a=new Date(Date.UTC(t[1].getFullYear(),t[1].getMonth(),t[1].getDate(),23,59,59));y.repartitionByWeeks({dates:[n,a]}).then((function(t){console.log(t),e.setState({data:t.agregatedData,date:t.updatedDates.map((function(e){return new Date(e)}))})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.date,n=e.data,a=e.calendarClicked,s=t[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),i=t[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(Oe,{setStartDate:this.setStartDate,calendarClicked:a,openCalendar:this.openCalendar,date:t,title:"jours d'affluence"}),Object(u.jsxs)("div",{className:"background-hot-day",children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",s," au ",i]})}),Object(u.jsx)("div",{className:"Graph-hot-day",children:this.state.data&&Object(u.jsx)(pe.a,{width:"100%",height:"70%",style:{paddingTop:"50px"},children:Object(u.jsxs)(xe.a,{width:"100%",height:"100%",data:this.state.data,margin:{top:5,right:30,left:20,bottom:5},children:[Object(u.jsx)(Ce.a,{dataKey:"name",tick:{fill:"#706C7A",fontSize:14},tickMargin:15,stroke:"#706C7A"}),Object(u.jsx)(ye.a,{axisLine:!1,tick:!1,padding:{top:20}}),Object(u.jsx)(fe.a,{cursor:!1,contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px",transform:"translate(-60%, -100%)"}}),Object(u.jsx)(ke.a,{type:"monotone",dataKey:"value",stroke:"#B5C8FF",dot:Object(u.jsx)(Se,{}),name:"Visites",activeDot:!1})]})})}),n&&Object(u.jsxs)("div",{className:"total-hot-day",children:[Object(u.jsx)("h2",{children:"moyenne des visites en semaine"}),Object(u.jsx)("p",{children:n.reduce((function(e,t){return e+t.value}),0)})]})]})]})}}]),n}(a.Component),De=n(392),Ne=n(206),Fe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={data:null,date:[new Date(new Date-26784e5),new Date],weekDays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],calendarClicked:!1,selectDayClicked:!1,isCheckboxes:!0},e.colors=["#ffb0b0","#fac696","#f7e68f","#a7f2a5","#96f2ef","#b5c8ff","#F5C7FF","#C4C4C4"],e.setStartDate=function(t){var n=e.state.weekDays;console.log(n),e.setState({date:t},(function(){return y.hotTime({dates:t,weekDays:n}).then((function(t){e.setState({data:t}),e.setState({calendarClicked:!1})})).catch((function(e){return console.log(e)}))}))},e.handleToggleDay=function(t){var n=e.state.date,a=new Date(Date.UTC(n[0].getFullYear(),n[0].getMonth(),n[0].getDate())),s=new Date(Date.UTC(n[1].getFullYear(),n[1].getMonth(),n[1].getDate(),23,59,59)),i=e.state.weekDays,c=t.target.name,r=i.indexOf(c);r>0?i.splice(r,1):i.push(c),y.hotTime({dates:[a,s],weekDays:i}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))},e.openCalendar=function(){e.setState({calendarClicked:!e.state.calendarClicked}),e.setState({selectDayClicked:!1})},e.openFilterDay=function(){e.setState({selectDayClicked:!e.state.selectDayClicked}),e.setState({calendarClicked:!1})},e.leaveSelectDay=function(){e.setState({selectDayClicked:!1,calendarClicked:!1})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.date,n=new Date(Date.UTC(t[0].getFullYear(),t[0].getMonth(),t[0].getDate())),a=new Date(Date.UTC(t[1].getFullYear(),t[1].getMonth(),t[1].getDate(),23,59,59));y.hotTime({dates:[n,a]}).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.calendarClicked,s=t.isCheckboxes,i=t.selectDayClicked,c=t.weekDays,r=t.data,o=n[0].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"}),l=n[1].toLocaleDateString("fr-FR",{year:"numeric",month:"numeric",day:"numeric"});return this.state.value&&(this.state.status.name,this.state.status.visit),Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)(Oe,{setStartDate:this.setStartDate,date:n,handleToggleDay:this.handleToggleDay,weekDays:c,title:"heures d'affluence",calendarClicked:a,selectDayClicked:i,openCalendar:this.openCalendar,openFilterDay:this.openFilterDay,isCheckboxes:s,leaveSelectDay:this.leaveSelectDay}),Object(u.jsx)("div",{className:"background-container-hot-time",children:Object(u.jsxs)("div",{className:"Graph-container",children:[Object(u.jsx)("div",{className:"date-range-container",children:Object(u.jsxs)("p",{children:["du ",o," au ",l]})}),this.state.data&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(pe.a,{width:"100%",height:"50%",children:Object(u.jsxs)(De.a,{data:this.state.data,children:[Object(u.jsx)(Ce.a,{dataKey:"name",tick:{fill:"#706C7A",fontSize:14},tickMargin:15,tickLine:!1,axisLine:!1}),Object(u.jsx)(fe.a,{cursor:!1,contentStyle:{borderRadius:"8px",boxShadow:"1px 2px 4px rgba(0, 0, 0, 0.12)",border:"none",fontFamily:"Asap",fontSize:"12px"}}),Object(u.jsx)(Ne.a,{dataKey:"value",fill:"#000000",name:"Visites",children:r.map((function(t,n){return Object(u.jsx)(me.a,{fill:e.colors[n%e.colors.length]},"cell-".concat(n))}))})]})})})]})})]})}}]),n}(a.Component),Le=(n(385),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{id:"not-found",children:[Object(u.jsx)("h1",{children:"404 bitch !"}),Object(u.jsx)("img",{src:"https://media.tenor.co/images/68a83f039448147d2d56c179e43bb474/raw",alt:"RuPaul GIF"})]})}}]),n}(a.Component));var Ue=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(I,{}),Object(u.jsx)("div",{id:"left-side",children:Object(u.jsx)(Y,{})}),Object(u.jsx)("div",{id:"right-side",children:Object(u.jsxs)(r.d,{children:[Object(u.jsx)(r.b,{exact:!0,path:"/",component:_}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/categories-repartition",component:ge}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/jour-affluence",component:we}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/heure-affluence",component:Fe}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/new-visit",component:se}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/update-visit",component:ie}),Object(u.jsx)(p,{protectionLevel:"volunteer",exact:!0,path:"/history",component:K}),Object(u.jsx)(p,{protectionLevel:"admin",exact:!0,path:"/parameters",component:he}),Object(u.jsx)(p,{protectionLevel:"admin",exact:!0,path:"/users",component:M}),Object(u.jsx)(p,{protectionLevel:"volunteer",path:"*",component:Le})]})})]})},Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,395)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))},Me=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(u.jsx)(d.Provider,{value:e,children:this.props.children})}}]),n}(a.Component);c.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(E.a,{children:Object(u.jsx)(Me,{children:Object(u.jsx)(Ue,{})})})}),document.getElementById("root")),Ae()}},[[386,1,2]]]);
//# sourceMappingURL=main.de4cefef.chunk.js.map